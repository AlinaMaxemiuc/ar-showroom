<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>AR Car Showroom</title>
  <link rel="stylesheet" href="assets/style.css">
</head>

<body>

<header class="site-header">
  <h1>AR Car Showroom</h1>
  <p class="subtitle muted">
    Alege o maÈ™inÄƒ, selecteazÄƒ culoarea È™i deschide AR Viewer.
  </p>

  <div class="toplinks">
    <a class="btn btn-ghost" href="viewer.html">AR Viewer</a>
    <a class="btn btn-ghost" href="about.html">Despre proiect</a>
  </div>
</header>

<div class="container">
  <div class="grid" id="catalog"></div>
</div>

<script>
  fetch('data/cars.json')
    .then(r => r.json())
    .then(cars => {
      const catalog = document.getElementById('catalog');

      cars.forEach(car => {
        const card = document.createElement('div');
        card.className = 'card';

        const savedColor = localStorage.getItem('color_' + car.id) || '#ff0000';

        card.innerHTML = `
          <h3>${car.name}</h3>
          <p class="muted">Model 3D interactiv Â· Realitate AugmentatÄƒ</p>

          <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px">
            <span class="muted">Culoare:</span>
            <input type="color" value="${savedColor}" style="width:44px;height:38px;border:0;border-radius:10px;padding:0">
          </div>

          <a class="btn" style="margin-top:12px;display:inline-flex" href="#">
            ðŸ“± Vezi Ã®n AR
          </a>
        `;

        const colorInput = card.querySelector('input[type="color"]');
        const link = card.querySelector('a.btn');

        function updateLink() {
          const color = colorInput.value;
          localStorage.setItem('color_' + car.id, color);
          // trimitem culoarea Ã®n URL
          link.href = `viewer.html?car=${encodeURIComponent(car.id)}&color=${encodeURIComponent(color)}`;
        }

        colorInput.addEventListener('input', updateLink);
        updateLink();

        catalog.appendChild(card);
      });
    });
</script>

</body>
</html>
